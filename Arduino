#include <Adafruit_NeoPixel.h>

#include <Adafruit_NeoPixel.h>

#define PIN 2
#define NUM_LEDS 256
#define WIDTH 32
#define HEIGHT 8

/*
 * MATRIX WIRING CONFIGURATION
 * ---------------------------
 * 32 wide x 8 tall NeoPixel matrix
 * Wired in blocks of 4 columns (32 LEDs per block)
 * Within each block: zigzag pattern
 *   - Even columns (0, 2): top to bottom
 *   - Odd columns (1, 3): bottom to top
 * 
 * Block 0 (cols 0-3)   Block 1 (cols 4-7)   ...
 * [0]  [15] [16] [31]  [32] [47] [48] [63]
 * [1]  [14] [17] [30]  [33] [46] [49] [62]
 * [2]  [13] [18] [29]  [34] [45] [50] [61]
 * [3]  [12] [19] [28]  [35] [44] [51] [60]
 * [4]  [11] [20] [27]  [36] [43] [52] [59]
 * [5]  [10] [21] [26]  [37] [42] [53] [58]
 * [6]  [9]  [22] [25]  [38] [41] [54] [57]
 * [7]  [8]  [23] [24]  [39] [40] [55] [56]
 */

Adafruit_NeoPixel strip(NUM_LEDS, PIN, NEO_GRB + NEO_KHZ800);

int xy(int x, int y) {
  int block = x / 4;
  int colInBlock = x % 4;
  int blockStart = block * 32;
  
  if (colInBlock % 2 == 0) {
    return blockStart + colInBlock * 8 + y;
  } else {
    return blockStart + colInBlock * 8 + (7 - y);
  }
}

void setPixel(int x, int y, uint32_t color) {
  if (x >= 0 && x < WIDTH && y >= 0 && y < HEIGHT) {
    strip.setPixelColor(xy(x, y), color);
  }
}

void drawCenteredLine(int centerX, int y, int width, uint32_t color) {
  int startX = centerX - width / 2;
  for (int i = 0; i < width; i++) {
    setPixel(startX + i, y, color);
  }
}

void drawTree(int centerX, uint32_t greenColor, uint32_t brownColor) {
  drawCenteredLine(centerX, 0, 1, greenColor);
  drawCenteredLine(centerX, 1, 3, greenColor);
  drawCenteredLine(centerX, 2, 5, greenColor);
  drawCenteredLine(centerX, 3, 7, greenColor);
  drawCenteredLine(centerX, 4, 9, greenColor);
  
  drawCenteredLine(centerX, 5, 3, brownColor);
  drawCenteredLine(centerX, 6, 3, brownColor);
  drawCenteredLine(centerX, 7, 3, brownColor);
}

void setup() {
  strip.begin();
  strip.setBrightness(20);
  strip.clear();
  
  uint32_t green = strip.Color(0, 80, 0);
  uint32_t brown = strip.Color(60, 30, 0);
  
  // Tree centers: 4, 15, 26
  // Left tree:   center 4,  spans 0-8   (gap of 2 to middle)
  // Middle tree: center 15, spans 11-19 (gap of 2 to right)
  // Right tree:  center 26, spans 22-30
  drawTree(4, green, brown);
  drawTree(15, green, brown);
  drawTree(26, green, brown);
  
  strip.show();
}

void loop() {
}
